{"ast":null,"code":"var _jsxFileName = \"/home/unicode/Public/prev_backup_unzip/src/booking_finalization/client/src/pages/login/Login.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { AuthContext } from '../../context/AuthContext';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const [credentials, setCredentials] = useState({\n    username: undefined,\n    password: undefined\n  });\n  const {\n    loading,\n    error,\n    dispatch\n  } = useContext(AuthContext);\n\n  const handleCredentialsChange = e => {\n    let {\n      name,\n      value\n    } = e.target;\n    setCredentials(pre => ({ ...pre,\n      [name]: value\n    }));\n  };\n\n  console.log(credentials);\n\n  const handleLogin = async e => {\n    e.preventDefault();\n    dispatch({\n      type: 'LOGIN_START'\n    });\n\n    try {\n      let {\n        data\n      } = await axios.post(`http://localhost:4000/api/auth/login`, credentials);\n      dispatch({\n        type: 'LOGIN_SUCCESS',\n        payload: data\n      });\n      if (data !== null && data !== void 0 && data[0].isadmin) navigate('/admin');else navigate('/');\n    } catch (err) {\n      dispatch({\n        type: 'LOGIN_FAILURE',\n        payload: err.response.data\n      });\n    }\n  };\n\n  const navigate = useNavigate();\n  useEffect(() => {\n    (async () => {// try {\n      //     let { data, status } = await axios.get(`http://localhost:4000/api/hotels/${window.location.pathname.split('/').slice(-1)[0]}`)\n      //     if (status === 200)\n      //         setHotel(data[0]);\n      //     setPhotos(data[0].photos)\n      // } catch (err) {\n      //     setHotel(null);\n      //     setPhotos([])\n      // }\n    })();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"login-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"username\",\n          children: \"Username:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"username\",\n          name: \"username\",\n          required: true,\n          onChange: handleCredentialsChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"input-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          for: \"password\",\n          children: \"Password:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          name: \"password\",\n          required: true,\n          onChange: handleCredentialsChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: JSON.stringify(error)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: handleLogin,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"4cL7ocx+aAilkiG4OB/g9ONelqQ=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/unicode/Public/prev_backup_unzip/src/booking_finalization/client/src/pages/login/Login.jsx"],"names":["React","useContext","useEffect","useState","AuthContext","axios","useNavigate","Login","credentials","setCredentials","username","undefined","password","loading","error","dispatch","handleCredentialsChange","e","name","value","target","pre","console","log","handleLogin","preventDefault","type","data","post","payload","isadmin","navigate","err","response","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport { AuthContext } from '../../context/AuthContext';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\n\nconst Login = () => {\n\n    const [credentials, setCredentials] = useState({\n        username: undefined,\n        password: undefined\n    })\n\n    const { loading, error, dispatch } = useContext(AuthContext);\n\n\n    const handleCredentialsChange = (e) => {\n        let {name, value} = e.target;\n        setCredentials(pre=>({...pre, [name]: value}));\n    }\n\n    console.log(credentials)\n    const handleLogin = async (e) => {\n        e.preventDefault();\n        dispatch({type: 'LOGIN_START'});\n        try{\n            let { data } = await axios.post(`http://localhost:4000/api/auth/login`, credentials)\n            dispatch({type: 'LOGIN_SUCCESS', payload: data})\n            if(data?.[0].isadmin)\n                navigate('/admin')\n            else\n                navigate('/')\n\n        } catch (err){\n            dispatch({type: 'LOGIN_FAILURE', payload: err.response.data})\n        }\n    }\n\n    const navigate = useNavigate();\n\n    useEffect(() => {\n\n        (async () => {\n\n\n            // try {\n            //     let { data, status } = await axios.get(`http://localhost:4000/api/hotels/${window.location.pathname.split('/').slice(-1)[0]}`)\n            //     if (status === 200)\n            //         setHotel(data[0]);\n            //     setPhotos(data[0].photos)\n            // } catch (err) {\n            //     setHotel(null);\n            //     setPhotos([])\n            // }\n\n        })();\n\n    }, []);\n\n\n    return (\n        <div class=\"login-container\">\n            <h2>Login</h2>\n            <form>\n                <div class=\"input-group\">\n                    <label for=\"username\">Username:</label>\n                    <input type=\"text\" id=\"username\" name=\"username\" required onChange={handleCredentialsChange}/>\n                </div>\n                <div class=\"input-group\">\n                    <label for=\"password\">Password:</label>\n                    <input type=\"password\" id=\"password\" name=\"password\" required onChange={handleCredentialsChange}/>\n                </div>\n                <p>{JSON.stringify(error)}</p>\n                <button type=\"button\" onClick={handleLogin}>Login</button>\n            </form>\n        </div>\n    )\n}\n\nexport default Login"]},"metadata":{},"sourceType":"module"}